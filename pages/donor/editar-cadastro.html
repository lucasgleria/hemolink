<!DOCTYPE html>
<html lang="pt-BR">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Hemolink - Cadastro de Doador</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        .blood-type-selector {
            display: grid;
            grid-template-columns: repeat(4, 1fr);
            gap: 8px;
        }

        .blood-type-option {
            display: flex;
            align-items: center;
            justify-content: center;
            height: 40px;
            border-radius: 8px;
            cursor: pointer;
            transition: all 0.3s ease;
            font-weight: bold;
            border: 2px solid transparent;
        }

        .blood-type-option.selected {
            border-color: #dc2626;
            transform: scale(1.05);
            box-shadow: 0 4px 6px -1px rgba(220, 38, 38, 0.1), 0 2px 4px -1px rgba(220, 38, 38, 0.06);
        }

        @media (max-width: 640px) {
            .blood-type-selector {
                grid-template-columns: repeat(2, 1fr);
            }
        }

        /* Mask for inputs */
        input[data-mask="date"] {
            position: relative;
        }

        input[data-mask="date"]:valid:after {
            position: absolute;
            content: "✓";
            color: #10b981;
            padding-left: 5px;
        }
    </style>
</head>

<body class="bg-gray-50">
    <header class="bg-white shadow-sm">
        <div class="container mx-auto px-4 py-4 flex justify-between items-center">
            <div class="flex items-center">
                <div class="bg-red-600 text-white p-2 rounded-lg mr-3">
                    <i class="fas fa-heartbeat text-2xl"></i>
                </div>
                <h1 class="text-2xl font-bold text-red-600">Hemolink</h1>
            </div>
            <div class="flex items-center space-x-4">
                <a href="../donor/doadores-disponiveis.html" class="text-gray-600 hover:text-red-600">
                    <i class="fas fa-arrow-left mr-1"></i> Voltar
                </a>
                <div class="relative">
                    <i class="fas fa-bell text-gray-600 text-xl cursor-pointer"></i>
                    <span class="absolute top-0 right-0 h-2 w-2 rounded-full bg-red-600"></span>
                </div>
                <a href="../auth/login.html">
                    <div class="h-8 w-8 rounded-full bg-gray-200 flex items-center justify-center">
                        <i class="fas fa-user text-gray-600"></i>
                    </div>
                </a>
            </div>
        </div>
    </header>

    <main class="container mx-auto px-4 py-8">
        <div class="max-w-3xl mx-auto bg-white rounded-xl shadow-md overflow-hidden">
            <div class="p-6">
                <div class="flex items-center mb-6">
                    <div class="bg-red-100 p-3 rounded-lg mr-4">
                        <i class="fas fa-user-edit text-red-600 text-xl"></i>
                    </div>
                    <h2 class="text-2xl font-bold text-gray-800">Cadastro de Doador</h2>
                </div>

                <p class="text-gray-600 mb-8">Preencha seus dados para criar sua conta ou atualizar seu cadastro.</p>

                <form id="donorForm">
                    <!-- Nome e Sobrenome -->
                    <div class="grid grid-cols-1 md:grid-cols-2 gap-6 mb-6">
                        <div>
                            <label for="firstName" class="block text-gray-700 font-medium mb-2">Nome</label>
                            <input type="text" id="firstName" name="firstName"
                                class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-red-500 focus:border-transparent"
                                placeholder="Seu nome" required>
                        </div>
                        <div>
                            <label for="lastName" class="block text-gray-700 font-medium mb-2">Sobrenome</label>
                            <input type="text" id="lastName" name="lastName"
                                class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-red-500 focus:border-transparent"
                                placeholder="Seu sobrenome" required>
                        </div>
                    </div>

                    <!-- Email -->
                    <div class="mb-6">
                        <label for="email" class="block text-gray-700 font-medium mb-2">Email</label>
                        <input type="email" id="email" name="email"
                            class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-red-500 focus:border-transparent"
                            placeholder="seu.email@exemplo.com" required>
                    </div>

                    <!-- CPF -->
                    <div class="mb-6">
                        <label for="cpf" class="block text-gray-700 font-medium mb-2">CPF</label>
                        <input type="text" id="cpf" name="cpf"
                            class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-red-500 focus:border-transparent"
                            placeholder="000.000.000-00" data-mask="000.000.000-00" required>
                    </div>

                    <!-- Data de Nascimento -->
                    <div class="mb-6">
                        <label for="birthDate" class="block text-gray-700 font-medium mb-2">Data de Nascimento</label>
                        <input type="text" id="birthDate" name="birthDate"
                            class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-red-500 focus:border-transparent"
                            placeholder="dd/mm/aaaa" data-mask="00/00/0000" required>
                    </div>

                    <!-- Tipo Sanguíneo -->
                    <div class="mb-6">
                        <label class="block text-gray-700 font-medium mb-2">Tipo Sanguíneo</label>
                        <div class="blood-type-selector">
                            <div class="blood-type-option bg-red-600 text-white" data-type="A+">A+</div>
                            <div class="blood-type-option bg-red-600 text-white" data-type="A-">A-</div>
                            <div class="blood-type-option bg-red-600 text-white" data-type="B+">B+</div>
                            <div class="blood-type-option bg-red-600 text-white" data-type="B-">B-</div>
                            <div class="blood-type-option bg-red-600 text-white" data-type="AB+">AB+</div>
                            <div class="blood-type-option bg-red-600 text-white" data-type="AB-">AB-</div>
                            <div class="blood-type-option bg-red-600 text-white" data-type="O+">O+</div>
                            <div class="blood-type-option bg-red-600 text-white" data-type="O-">O-</div>
                        </div>
                        <input type="hidden" id="bloodType" name="bloodType" required>
                    </div>

                    <!-- Telefone -->
                    <div class="mb-6">
                        <label for="phone" class="block text-gray-700 font-medium mb-2">Telefone</label>
                        <input type="text" id="phone" name="phone"
                            class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-red-500 focus:border-transparent"
                            placeholder="(00) 00000-0000" data-mask="(00) 00000-0000" required>
                    </div>

                    <!-- CEP -->
                    <div class="mb-6">
                        <label for="cep" class="block text-gray-700 font-medium mb-2">CEP</label>
                        <div class="flex">
                            <input type="text" id="cep" name="cep"
                                class="w-full px-4 py-3 border border-gray-300 rounded-l-lg focus:outline-none focus:ring-2 focus:ring-red-500 focus:border-transparent"
                                placeholder="00000-000" data-mask="00000-000" required>
                            <button type="button" id="searchCep"
                                class="bg-red-600 hover:bg-red-700 text-white px-4 py-3 rounded-r-lg font-medium transition duration-300">
                                <i class="fas fa-search"></i>
                            </button>
                        </div>
                    </div>

                    <!-- Endereço (auto preenchido pelo CEP) -->
                    <div class="grid grid-cols-1 md:grid-cols-3 gap-6 mb-6">
                        <div class="md:col-span-2">
                            <label for="street" class="block text-gray-700 font-medium mb-2">Rua</label>
                            <input type="text" id="street" name="street"
                                class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-red-500 focus:border-transparent"
                                placeholder="Nome da rua" readonly>
                        </div>
                        <div>
                            <label for="number" class="block text-gray-700 font-medium mb-2">Número</label>
                            <input type="text" id="number" name="number"
                                class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-red-500 focus:border-transparent"
                                placeholder="Nº">
                        </div>
                    </div>

                    <div class="grid grid-cols-1 md:grid-cols-3 gap-6 mb-6">
                        <div>
                            <label for="complement" class="block text-gray-700 font-medium mb-2">Complemento</label>
                            <input type="text" id="complement" name="complement"
                                class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-red-500 focus:border-transparent"
                                placeholder="Apto, bloco, etc.">
                        </div>
                        <div>
                            <label for="neighborhood" class="block text-gray-700 font-medium mb-2">Bairro</label>
                            <input type="text" id="neighborhood" name="neighborhood"
                                class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-red-500 focus:border-transparent"
                                placeholder="Bairro" readonly>
                        </div>
                        <div>
                            <label for="city" class="block text-gray-700 font-medium mb-2">Cidade</label>
                            <input type="text" id="city" name="city"
                                class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-red-500 focus:border-transparent"
                                placeholder="Cidade" readonly>
                        </div>
                    </div>

                    <div class="mb-6">
                        <label for="state" class="block text-gray-700 font-medium mb-2">Estado</label>
                        <input type="text" id="state" name="state"
                            class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-red-500 focus:border-transparent"
                            placeholder="Estado" readonly>
                    </div>

                    <!-- Termos e Condições -->
                    <div class="mb-8">
                        <div class="flex items-start">
                            <div class="flex items-center h-5">
                                <input id="terms" name="terms" type="checkbox"
                                    class="focus:ring-red-500 h-4 w-4 text-red-600 border-gray-300 rounded" required>
                            </div>
                            <div class="ml-3 text-sm">
                                <label for="terms" class="font-medium text-gray-700">Eu concordo com os <a href="#"
                                        class="text-red-600 hover:text-red-800">Termos de Uso</a> e <a href="#"
                                        class="text-red-600 hover:text-red-800">Política de Privacidade</a></label>
                                <p class="text-gray-500">Ao criar sua conta, você concorda com nossos termos e
                                    condições.</p>
                            </div>
                        </div>
                    </div>

                    <!-- Botões -->
                    <div class="flex justify-end space-x-4">
                        <a href="../donor/doadores-disponiveis.html"
                            class="bg-gray-200 hover:bg-gray-300 text-gray-800 px-6 py-3 rounded-lg font-medium transition duration-300">
                            Cancelar
                        </a>
                        <button type="submit"
                            class="bg-red-600 hover:bg-red-700 text-white px-6 py-3 rounded-lg font-medium transition duration-300 flex items-center">
                            <i class="fas fa-save mr-2"></i> Salvar Cadastro
                        </button>
                    </div>
                </form>
            </div>
        </div>
    </main>

    <footer class="bg-white border-t border-gray-200 py-6 mt-12">
        <div class="container mx-auto px-4">
            <div class="flex flex-col md:flex-row justify-between items-center">
                <div class="flex items-center mb-4 md:mb-0">
                    <div class="bg-red-600 text-white p-2 rounded-lg mr-3">
                        <i class="fas fa-heartbeat text-xl"></i>
                    </div>
                    <h2 class="text-xl font-bold text-red-600">Hemolink</h2>
                </div>
                <div class="flex space-x-6">
                    <a href="#" class="text-gray-600 hover:text-red-600"><i class="fab fa-facebook-f"></i></a>
                    <a href="#" class="text-gray-600 hover:text-red-600"><i class="fab fa-twitter"></i></a>
                    <a href="#" class="text-gray-600 hover:text-red-600"><i class="fab fa-instagram"></i></a>
                    <a href="#" class="text-gray-600 hover:text-red-600"><i class="fab fa-linkedin-in"></i></a>
                </div>
            </div>
            <div class="mt-6 pt-6 border-t border-gray-100 text-center text-gray-500 text-sm">
                <p>© 2023 Hemolink. Todos os direitos reservados.</p>
                <p class="mt-2">Sistema de gerenciamento de doadores de sangue</p>
            </div>
        </div>
    </footer>

    <script>
        // Seleção de tipo sanguíneo
        document.querySelectorAll('.blood-type-option').forEach(option => {
            option.addEventListener('click', function () {
                document.querySelectorAll('.blood-type-option').forEach(opt => {
                    opt.classList.remove('selected');
                });
                this.classList.add('selected');
                document.getElementById('bloodType').value = this.getAttribute('data-type');
            });
        });

        // Máscaras para os campos
        function applyMask(element, pattern) {
            element.addEventListener('input', function (e) {
                let value = this.value.replace(/\D/g, '');
                let patternChars = pattern.replace(/\D/g, '');

                if (value.length > patternChars.length) {
                    value = value.substring(0, patternChars.length);
                }

                let formattedValue = '';
                let valueIndex = 0;

                for (let i = 0; i < pattern.length; i++) {
                    if (valueIndex >= value.length) break;

                    if (pattern[i] === '0') {
                        formattedValue += value[valueIndex];
                        valueIndex++;
                    } else {
                        formattedValue += pattern[i];
                    }
                }

                this.value = formattedValue;
            });
        }

        // Aplicar máscaras
        document.querySelectorAll('[data-mask]').forEach(element => {
            const mask = element.getAttribute('data-mask');
            applyMask(element, mask);
        });

        // Simulação de busca de CEP
        document.getElementById('searchCep').addEventListener('click', function () {
            const cep = document.getElementById('cep').value.replace(/\D/g, '');

            if (cep.length !== 8) {
                alert('CEP inválido. Digite os 8 dígitos.');
                return;
            }

            // Simulação de API de CEP
            setTimeout(() => {
                document.getElementById('street').value = 'Rua das Flores';
                document.getElementById('neighborhood').value = 'Jardim Primavera';
                document.getElementById('city').value = 'São Paulo';
                document.getElementById('state').value = 'SP';

                // Remover readonly para permitir edição se necessário
                document.getElementById('street').readOnly = false;
                document.getElementById('neighborhood').readOnly = false;
                document.getElementById('city').readOnly = false;
                document.getElementById('state').readOnly = false;
            }, 800);
        });

        // Validação do formulário
        document.getElementById('donorForm').addEventListener('submit', function (e) {
            e.preventDefault();

            if (!document.getElementById('bloodType').value) {
                alert('Por favor, selecione seu tipo sanguíneo');
                return;
            }

            if (!document.getElementById('terms').checked) {
                alert('Você precisa aceitar os termos e condições');
                return;
            }

            // Verificar idade mínima (18 anos)
            const birthDate = document.getElementById('birthDate').value;
            if (birthDate) {
                const parts = birthDate.split('/');
                const birthDay = new Date(parts[2], parts[1] - 1, parts[0]);
                const today = new Date();
                let age = today.getFullYear() - birthDay.getFullYear();
                const monthDiff = today.getMonth() - birthDay.getMonth();

                if (monthDiff < 0 || (monthDiff === 0 && today.getDate() < birthDay.getDate())) {
                    age--;
                }

                if (age < 18) {
                    alert('Você precisa ter pelo menos 18 anos para se cadastrar como doador');
                    return;
                }
            }

            // Simulação de cadastro
            alert('Cadastro atualizado com sucesso!');
            window.location.href = 'profile.html';
        });

        // Preencher formulário com dados existentes (simulação)
        window.addEventListener('DOMContentLoaded', function () {
            // Simulando dados existentes do usuário
            const userData = {
                firstName: 'Fulano',
                lastName: 'Da silva Sauro',
                email: 'Fulado.silva@exemplo.com',
                cpf: '123.456.789-00',
                birthDate: '12/11/2005',
                bloodType: 'O+',
                phone: '(11) 98765-4321',
                cep: '01234-567',
                street: 'Rua dos doadores',
                number: '123',
                complement: 'Apto 101',
                neighborhood: 'Jardim Hemolink',
                city: 'São Paulo',
                state: 'SP'
            };

            // Preencher campos
            for (const key in userData) {
                const element = document.getElementById(key);
                if (element) {
                    element.value = userData[key];

                    // Selecionar tipo sanguíneo se existir
                    if (key === 'bloodType') {
                        document.querySelector(`.blood-type-option[data-type="${userData[key]}"]`).click();
                    }
                }
            }
        });

        // Notification bell click
        const notificationBell = document.querySelector('.fa-bell');
        notificationBell.addEventListener('click', function () {
            alert('Mostrar notificações');
        });
    </script>
</body>

</html>